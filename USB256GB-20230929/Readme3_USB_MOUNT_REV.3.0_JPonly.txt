################################################################################
#
# 金沢大学 学術メディア創成センター MONKチーム
#
# Windows10/11のWSLでUSBメモリを使用するためのマウント方法
#
# 作成者・連絡先:
#     金沢大学学術メディア創成センター 大野、森
#     USP研究所 綿野 <s-watano@usp-lab.com>、山田<m-yamada@usp-lab.com>、松浦 <t-matsuura@usp-lab.com>
# 最終更新日   : 2023年9月29日
#
################################################################################

<<注意/Attention>>

以下の内容は、Windows10/11のパソコン（ノート型、デスクトップ型を問わない）を使用している方のみに向けたものです。
macOSの場合は、以下の内容の作業を行わなくてもターミナルからアクセスすることができます。

なお、分からない単語がある場合は、Google検索等で検索して、調べてください。

作業内容が分からない、上手く行かない場合は、アカンサスポータルから、担当教員（大野、森）にメッセージで質問してください。


################################################################################

<<Windows10/11で、WSLを使用している場合のUSBメモリマウント方法>>

(0) USBメモリをパソコンに差し込み、Windows10/11のエクスプローラーでUSBメモリにアクセスできることを確認する。


------------------
※(1)からの操作は「WSL」のウインドウで実行すること。
  なお、ここからはWSLに入力するコマンドを書いた行の行頭には「$」を書きます。
  「$」は、「これ以降にコマンドを表示する」という目印です。
  実際に、WSLにコマンドを入力するときには、「$」は入力しないこと。
------------------


(1) WSLで以下のコマンドを実行し、マウントポイントとなるディレクトリ（フォルダ）を作成する。
    なお、この作業は、最初の１回だけ行う。

$ sudo mkdir /mnt/usb（↲エンターキーを押す/Press the Enter key）

※「sudo」を最初に書いたコマンドを実行すると、WSLインストール時の初期設定で入力したパスワードの入力を要求されるので、間違えずに入力すること。

※なお、ここでパスワードを入力しても、画面上は●や＊が表示されることはありません。
  しかし、システム上は入力されているので、そのままパスワードを入力し、入力し終わったら、エンターキーを押してください。


(2) WSLで以下のコマンドを実行し、ディレクトリが作成されているか確認する。

$ ls /mnt（↲エンターキーを押す/Press the Enter key）

WSLの画面に以下の表示が出れば、ディレクトリは作成できている。

c  usb


注意：(1)と(2)の作業は、最初のマウント時に１回だけ行う。
     ２回目以降のマウントでは、(1)と(2)の作業は行わない。


(3) WSLで以下のコマンドを実行し、USBメモリを(1)で作ったディレクトリにマウントする。

$ sudo mount -t drvfs z: /mnt/usb（↲エンターキーを押す/Press the Enter key）

注意：このコマンドで入力している「z:」のアルファベット部分は、
     USBメモリを差し込んだパソコンによって自動的に設定されるドライブを表わしている。
     そのため、パソコンによって、異なるアルファベットが設定されている。
     USBメモリを差し込んだ後に、Windows10/11のエクスプローラーで、
     USBメモリに割り振られたアルファベットを確認すること。


(4) WSLで以下のコマンドを実行し、USBメモリをマウントできたことを確認する。

$ ls /mnt/usb（↲エンターキーを押す/Press the Enter key）

以下のような表示がされればマウント成功です。

PT4A				Readme2_tree.txt		         Readme4_PT4A_REV.2.0.txt          data
Readme1_Rev.2.0.txt		Readme3_USB_MOUNT_REV.2.0.txt	'System Volume Information'

何も表示されない場合は、マウント失敗です。

マウントに失敗する原因は２つです。
a) USBメモリーに割り当てられているドライブのアルファベットが間違っている。
b) a)以外で(3)のコマンドを間違っている。

a)、b)を確認し、もう一度、(3)を実行すること。


(5) WSLで以下のコマンドを実行し、USBメモリのディレクトリに移動する

$ cd /mnt/usb（↲エンターキーを押す/Press the Enter key）

注意：ディレクトリの移動については、
      https://eng-entrance.com/linux-command-cd
      に詳細が書かれているので、アクセスすること。


以上
################################################################################

<<Windows10/11で、WSLを使用している場合のUSBメモリアンマウント方法>>

Linux(WSL)では、マウントしたUSBメモリをパソコンから抜き取る前に、
必ず「アンマウント」をしなくてはならない。
パソコンからUSBメモリを抜く前に、以下の手順に従って、必ずアンマウントすること。

(1) WSLでUSBメモリ内のディレクトリで作業をしている場合、アンマウントできないので、
    WSLで以下のコマンドを実行し、ディレクトリを移動する。

$ cd（↲エンターキーを押す/Press the Enter key）


(2) WSLで以下のコマンドを実行し、アンマウントする。

$ sudo umount /mnt/usb（↲エンターキーを押す/Press the Enter key）


(3) パソコン（Windows）で、USBメモリを取り出す操作をする。

(4) (3)の作業後、USBメモリをパソコンから抜く。


以上
################################################################################

≪履歴/Update History≫

 2021年8月5日  Ver.2.0
 2022年6月14日 Ver.2.1
 2022年10月1日 Ver.2.1a
 2022年10月11日 Ver.2.2
 2023年9月29日 Ver.3.0
