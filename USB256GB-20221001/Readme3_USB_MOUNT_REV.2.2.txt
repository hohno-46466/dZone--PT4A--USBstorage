################################################################################
#
# 金沢大学 大学院科目
# 「2022年度 スマート創成科学（第1回から第3回）」向け
#
# USBメモリ内のビッグデータ（定型、非定型）およびサンプルスクリプトについて
#
# 作成者・連絡先: 
# 　　金沢大学学術メディア創成センター 大野、森
# 　　USP研究所 綿野 <s-watano@usp-lab.com>、山田<m-yamada@usp-lab.com>、松浦 <t-matsuura@usp-lab.com>
# 最終更新日    : 2022年10月11日
#
################################################################################

<<注意>>

以下の内容は、Windows10/11のパソコン（ノート型、デスクトップ型を問わない）を使用している方のみに向けたものです。
macOSの場合は、以下の内容の作業を行わなくてもターミナルからアクセスすることができます。

なお、分からない単語がある場合は、Google検索等を行い、調べておきましょう。
作業内容が分からない、上手く行かない場合は、アカンサスポータルから、担当教員（大野、森）にメッセージで質問してください。



################################################################################

<<Windows10/11で、WSLを使用している場合のUSBメモリマウント方法>>

（１）USBメモリをパソコンに挿し込み、エクスプローラーなどでUSBメモリにアクセスできることを確認する。

（２）以下のコマンドを実行し、マウントポイントとなるディレクトリ（フォルダ）を作成する。
ここからの操作は「WSL」のウインドウで実行してください。
なお、以下の内容において、入力すべきコマンドの最初の一文字目には「$」が書かれています。
これは、この「$」以降にコマンドを表示するという目印です。
コマンドを入力するときには、「$」は入力してはいけません。


$ sudo mkdir /mnt/usb（↲エンターキーを押す）

すると、WSLの初期設定で入力したパスワードの入力を要求されるので、入力してください。
なお、ここでパスワードを入力しても、画面上は●や＊が表示されることはありません。
しかし、システム上は入力されているので、そのままパスワードを入力し、入力し終わったら、エンターキーを押してください。


（３）ディレクトリが作成されているか確認
画面上で、行が１つだけ下に移動したのなら（２）の作業は成功しています。
成功し、ディレクトリが作成されているか確認してみましょう。
確認のためには、以下のコマンドを入力します。

$ ls /mnt（↲エンターキーを押す）

このときに画面に、以下のような感じで表示がされれば、（２）の作業が成功しています。


c  usb


ちなみに、「c」とは、パソコンのディスクに振られているアルファベット名で、
エクスプローラーでは、「ボリューム（C:）」などのように表示されている部分の括弧内のアルファベットです。
　　※ボリューム部分には、パソコンによって、適当な名称が表示されています。

パソコンによっては、「ボリューム（D:）」や「ボリューム（E:）」といったものもあるかもしれません。


（４）以下のコマンドを入力して、USBメモリを（２）で作ったディレクトリにマウントします。

注意点としては、以下のコマンドで入力している「z:」というアルファベット部分は、
皆さんのパソコンによって異なります。
Windows10/11のエクスプローラーなどを起動させて、自分のパソコン上で、USBメモリに割り振られたアルファベットを特定してください。

$ sudo mount -t drvfs z: /mnt/usb（↲エンターキーを押す）


（５）マウントしたが成功しているかどうかを、USBメモリ内の内容が表示されることで確認します。
画面上で、行が１つだけ下に移動したのなら（４）の作業は成功しています。
成功し、USBメモリがマウントされて、USBメモリ内の各ディレクトリやファイルを見ることができるか確認してみましょう。
確認のためには、以下のコマンドを入力します。

$ ls /mnt/usb（↲エンターキーを押す）

以下のような表示がされればOKです。

PT4A				Readme2_tree.txt		         Readme4_PT4A_REV.2.0.txt          data
Readme1_Rev.2.0.txt		Readme3_USB_MOUNT_REV.2.0.txt	'System Volume Information'


何も表示されない場合は、マウントが失敗していると考えられます。
入力したコマンドに打ち間違いが無いか、
USBメモリに割り振られたアルファベットが正しいかを確認し、
改めてコマンドを入力してみましょう。



（６）講義でUSBメモリ内のデータを使う場合は、USBメモリのディレクトリに移動する
ここまで作業をしてきたコマンドを入力して操作する方法では、
作業をするためには、コマンドを入力して、作業を行うディレクトリまで移動する必要があります。
　　※マウスを使って、エクスプローラーで該当のフォルダを開く作業に該当します。

以下のコマンドを入力して、ディレクトリを移動します。

$ cd /mnt/usb（↲エンターキーを押す）

さらに、データが保存されているディレクトリに移動する場合は、

$ cd data（↲エンターキーを押す）

などのコマンドを入力して移動します。
ディレクトリの移動について、

https://eng-entrance.com/linux-command-cd

のページに詳細が書かれていましたので、アクセスしてみると良いでしょう。


################################################################################

<<Windows10/11で、WSLを使用している場合のUSBメモリアンマウント方法>>

（１）作業を終了し、USBメモリをパソコンから抜き取る前には、必ずアンマウントという作業をします。
画面に表示されている作業中のディレクトリが、USBメモリ内のディレクトリの場合、アンマウントできないので、
最初に以下のコマンドを入力して、ディレクトリを移動します。

$ cd（↲エンターキーを押す）

次に以下のコマンドを入力してください。

$ sudo umount /mnt/usb（↲エンターキーを押す）

（２）パソコン（Windows）で、USBメモリの取り出し作業をします。
WSL（Linux）上からのアンマウントは（１）の操作で完了しますが、
接続しているパソコン（Windows）では、まだUSBメモリとして認識されたままです。

そこで、（１）の作業後に、いつも、Windows10/11のパソコン上でUSBメモリを取り外すときに行っている操作をしてください。


（３）（２）の作業後、USBメモリをパソコンから取り外します。

################################################################################

≪履歴≫

 2021年8月5日  Ver.2.0
 2022年6月14日 Ver.2.1
 2022年10月11日 Ver.2.2

