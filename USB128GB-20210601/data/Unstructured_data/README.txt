################################################################################
#
# 金沢大学 共通教育科目
# 「2021年度Q2 シェルスクリプトを用いた『大規模データ処理』演習」および
# 「2021年度Q2 シェルスクリプトを用いた『ものグラミングと大規模データ処理』演習」向け
#
# 非定型データ（東京五輪ツイートデータ）およびサンプルスクリプト
#
# 作成者・連絡先: USP研究所 松浦智之 <t-matsuura@usp-lab.com>
# 最終更新日    : 2021年6月10日
#
################################################################################



===== ０. はじめに =============================================================

このディスクには、上記講義の演習で用いる非定型データとサンプルスクリプトを収録
しています。今回、非定型データには、何かと話題の絶えない、2020年東京オリンピック
に関するツイートの収集データを収録しました。


===== １．収録内容 =============================================================

README.txt ...... このファイル
Tokyo2020/ ...... 2020年東京オリンピックのツイートデータ収録ディレクトリー
                  （次節で説明します）
TUTORIAL.txt .... 解析のためのサンプルスクリプト（ワンライナー集）と解説
References/ ..... 参考文献収録ディレクトリー

なお、TUTORIAL.txt内のサンプルスクリプトでは"Personal Tukubai for Academic"
（PT4A）を用いていますので、そちらの演習を始める前に予めインストールを
済ませておいてください。PT4Aに関しては、別途配布れされる定型データの
USBフラッシュメモリを参照してください。


===== ２．ツイートデータの構造 =================================================

データは次のように格納してあります。（なお、これらのデータをどのように収集したか
については次節に記載してあります）

○ディレクトリー構造

Tokyo2020ディレクトリーの構造は次のとおりです。

Tokyo2020/
|
|-- <20200101>/ ....... 2020年1月1日のツイートファイル格納ディレクトリー
|   |
|   |-- 00.txt .......... その日のツイートファイル（0時台）
|   |-- 01.txt .......... その日のツイートファイル（1時台）
|   |    :
|   :    :
|   `-- 23.txt .......... その日のツイートファイル（23時台）
|
|-- <20200102>/ ....... 2020年1月2日のツイートファイル格納ディレクトリー
|   |
|   :
|
|-- <20200103>/ ....... 2020年1月3日のツイートファイル格納ディレクトリー
|   |
:   :
:
:

○ファイル構造

上記の 00.txt から 23.txt までの各ファイルには実際のツイートデータが入っている。
1ツイートは1行で表現されており、各行は次の13個の列から構成されている。

01.  ツイートされた日時（YYYY/MM/DD-hh:mm:ss、日本時間）
02. *ユーザー名
03.  ユーザーID（スクリーンネーム）
04.  認証済みアカウントなら"v"、そうでないなら"-"
05.  公式リツイートなら"RT"、そうでないなら"-"
06. *ツイート本文
07.  収集時点でのリツイート数
08.  収集時点でのいいね数
09. *ツイートの発信された場所の名前（ない場合は"-"）
10.  緯度,経度（ない場合は"-"）
11. *Twitterクライアント名
12.  Twitterクライアントの公式ページURL
13.  そのツイートのURL

※1 "*"の印を付けた列は次のルールによりエスケープされている。
  a. バックスラッシュ（"\"、環境によっては円記号に見える）は、"\\"で表す。
  b. アンダースコア（"_"）は、"\_"で表す。
  c. 改行は、"\n"で表す。
  d. 半角空白は"_"で表す。

※2 緯度,経度情報は、その情報の公開に同意しているツイートにのみ付いている。
    （約1%程度）

各列の間は半角空白で区切られている。従って、AWKコマンドで列番号を指定して
取り出すことができる。

# (例) 2021年2月28日12時台の、ツイートをした人のID（3列目）と
#      ツイート本文（6列目）を表示。
awk '{print $3,$6}' Tokyo2020/ANL/20210228/12.txt


===== ３．ツイートの収集方法 ===================================================

本教材を作るにあたっては、次のようにして収集したツイートデータを用いています。

○検索ワード

次のキーワードをTwitter API "https://api.twitter.com/1.1/search/tweets.json" に
与え、得られたツイート情報を収録しました。
-----
"オリンピック" OR "五輪" OR "パラリンピック" OR olympic OR olympics OR olympiad
 OR paralympic OR paralympics
-----

○期間

日本時間で、2019年7月24日（+その10日程度前まで）〜2021年6月10日午前8時59分

収集作業開始日は2019年7月24日（当初の開会式の1年前）ですが、Twitter APIは
約10日前までさかのぼれるため、実際は同年の7月14日から入っています。
ただし完全性（欠損がないか）は保証されません。

また、2019年10月20日の9時台から20時台は収集機器トラブルにより欠損しています。

○収集されたツイート数（2021年6月10日時点）

83,495,167


===== ４．参考文献 =============================================================

○論文「大量ツイートの収集・分析を個人で手軽に実現可能にする方法の提案」
・https://www.ipsj.or.jp/dp/contents/publication/41/S1101-R1802.html
・本講義の元になった大量ツイート収集分析に関する概要を論文としてまとたものです。

○"References"ディレクトリーの中のPDFファイル（2冊）
・それぞれの文書の後半に、大量ツイート収集分析に関する技術解説があります。
  * 大量ツイート収集のための具体的な作業
  * データ欠損や元々ツイートがない等で、記録そのものが無い時刻を"0埋め"する方法
  * など


===== ５．収録データの使用規約など =============================================

○ツイートデータ

このツイートデータは、「学術における利用（研究・教育）での使用」にのみ使用許可が
与えられています。理由は、Twitter APIの利用開始時の利用目的申請欄に対して、
そのように記入して、受理されたからです。

したがって、上記以外の目的には使用しないでください。すべてのツイートは実際のもの
ですので、ツイートを投稿した人を攻撃・侮辱する等の行為も、もちろん禁止です。

○サンプルスクリプト

収録しているサンプルスクリプトは、金沢大学とUSP研究所の共同研究活動において作成
されたものです。従って、著作権は両組織にあります。

基本的には学習のために最大限活用していただきたいのですが、次のような利用は
しないでください。

・著作権者の記述を変更したり消去したりしての利用
・販売などの営利目的での利用
・反社会的あるいは公序良俗に反する目的や組織での利用


以上
